<view class='flex-col' style='height:100%'>
  <view class='cu-custom' style="height:{{CustomBar}}px;">
    <view class="cu-bar fixed bg-pink light" style="height:{{CustomBar}}px;padding-top:{{StatusBar}}px;">
      <view class='pageMenu' bindtap='tointro'>
        <text class='icon-question'></text>
      </view>
      <view class='content'>宝贝成长助理</view>
    </view>
  </view>
  <scroll-view scroll-x class="bg-white nav"
     style='box-shadow:0 6rpx 6rpx rgba(0,0,0,.3)'>
    <view class='flex text-center'>
      <view class="cu-item flex-sub {{index==TabCur?'text-pink cur':''}}" wx:for="{{channels}}" wx:key bindtap='tabSelect' data-id="{{index}}">
        <view class='icon-{{item.icon}} lg'></view>
        <text>{{item.text}}</text>
      </view>
    </view>
  </scroll-view>
  <swiper class="screen-swiper flex-1"
      current='{{TabCur}}'
      bindanimationfinish="swiperChange">
    <swiper-item wx:for="{{channels}}" wx:key class="scroll_cont ">
      <radio-chart wx:if="{{index===0}}" current-index="{{TabCur}}" bindillegal="illegalAlert"></radio-chart>
      <bar-chart wx:if="{{index===1}}" current-index="{{TabCur}}"  bindillegal="illegalAlert"></bar-chart>
      <line-chart wx:if="{{index===2}}" current-index="{{TabCur}}" bindillegal="illegalAlert"></line-chart>
    </swiper-item>
  </swiper>

</view>
<!-- 初始化数据 -->
<view class="cu-modal {{modalVisible ? 'show':''}}">
  <view class="cu-dialog">
    <view class="cu-bar bg-white justify-end">
      <view class='content'>初始化数据</view>
    </view>
    <view class='padding-xl'>
      {{downloadPercent}} %
    </view>
  </view>
</view>
<!-- 登录loading -->
<view class='cu-load load-modal' wx:if="{{loadModal}}"> 
    <view class='gray-text'>{{loadModal}}...</view>
</view>
<!-- 授权 -->
<view class="cu-modal {{!userInfo ? 'show':''}}">
  <view class="cu-dialog">
    <view class="cu-bar bg-white justify-end">
      <view class='content'>登录</view>
    </view>
    <view class='padding-xl'>
      <view class='myavat shadow'>
        <image
          style="width: 100%; height: 100%; "
          src="/res/img/logo.png"
        ></image>
      </view>
      <view class='margin-xl'>引用世界卫生组织儿童生长标准数据，辅助衡量宝宝的成长健康状态</view>
      <button class='cu-btn  bg-green shadow lg block' open-type="getUserInfo" bindgetuserinfo="onGetUserInfo">微信登录</button>
    </view>
  </view>
</view>
<!-- 数据不合法警告 -->
<view class="cu-modal {{modalAlert ? 'show':''}}">
  <view class="cu-dialog">
    <view class="cu-bar bg-white justify-end">
      <view class='content'>数据异常</view>
    </view>
    <view class='padding-xl'>
      检测到<text class='text-red'>【{{modalAlert}}】</text>数据可能有异常，为保证数据准确性，请检查宝贝信息是否填写正确
    </view>
    <view class="cu-bar bg-white justify-end">
      <view class='action'>
        <button class='cu-btn line-green text-green' bindtap='tobaby'>确定</button>
        <button class='cu-btn margin-left' bindtap='hideAlert'>取消</button>
      </view>
    </view>
  </view>
</view>